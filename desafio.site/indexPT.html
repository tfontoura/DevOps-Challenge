<html>
<head>
<title> Desafio DevOps</title>
</head>
<div style="text-align: left; width:80%;margin: 0 auto;">
<h1 id="desafio-devops">Desafio DevOps</h1>
<h2 id="projeto-desafio.site"><em>Projeto desafio.site</em></h2>
<p><strong><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;por <a href="https://www.linkedin.com/in/tom-fontoura/">T. Fontoura</a></em> - <a href="index.html"><small>(English)</small></a></strong></p>
<p>Alguém desafiou-me a automatizar a criação de containers Docker em uma instância AWS, instalando Wordpress com Apache, tendo Nginx como proxy reverso.</p>
<p>Aceitei o desafio e, para incrementar um pouco, resolvi desenvolver um pequeno projeto (que não levasse mais de um dia para ficar pronto) que permitisse uma instalação simples, com poucas instruções, com o objetivo de resumir a instalação a apenas uma linha de comando. Assim todo o processo seria mais amigável. Denominei o projeto de <em>desafio.site</em>, por motivos que serão mostrados a seguir.</p>
Este pequeno projeto pode ser encontrado em <a href="https://github.com/tfontoura/DevOps-Challenge">https://github.com/tfontoura/DevOps-Challenge</a>
 <br/>
&nbsp;
<hr/>

<h2>Instalação</h2>

<ol> 
<li>Crie uma instância EC-2 AWS com a imagem <br/>
  <i>Ubuntu Server 20.04 LTS (HVM), SSD Volume Type - ami-04505e74c0741db8d (64-bit x86) </i>
</li>
<li> Coloque a instância em um grupo de segurança que tenha as portas 80, 443 e 22 abertas</li>

<li> Acesse a instância por SSH</li>

<li> Rode a seguinte linha de comando na shell:  <br/>
<pre><code class="lang-sh">curl <span class="hljs-string">https:</span><span class="hljs-comment">//desafio.site/init.sh | sudo bash</span>
</code></pre>
</li>
</ol>


Isso é tudo. Aguarde a instalação.<br/>
&nbsp;

<hr/>
<h2 id="como-foi-feito">Como foi feito</h2>
<ul>
<li>Criei um bucket S3 com o nome desafio.site e o configurei para site estático, ficando com o endereço web <em>desafio.site.s3-website-us-east-1.amazonaws.com</em>. Poderia utilizar este domínio, mas resolvi ir mais em frente, para poder demonstrar um pouco do meu conhecimento em domínios e DNS</li>
<li>Registrei o domínio <a href="https://desafio.site">desafio.site</a></li>
<li>Criei, no DNS do domínio, um registro CNAME apontando <a href="https://desafio.site">desafio.site</a> para desafio.site.s3-website-us-east-1.amazonaws.com</li>
<li>Escrevi o script de automatização <a href="https://desafio.site/init.sh">init.sh</a> e coloquei no website</li>
<li>Criei arquivo <a href="robots.txt">robots.txt</a> para não permitir que fosse indexado</li>
</ul>
<hr/>

<h2>Observações</h2>
Como este é um projeto rápido para avaliação, não foram levadas em consideração questões de segurança e outros pontos, como por exemplo:

<ul><li>Poderíamos criar senhas randômicas; poderíamos criar automaticamente, usando lambda e Cloudflare API, um subdominio de <i>desafio.site</i> para o novo servidor (nome que pode ser entrado manualmente, e assim já criar pastas para ele no EFS), etc.
</li></ul>
Não utilizei RDS nem EFS para que o projeto fosse mais facilmente reproduzido no servidor interno da empresa avaliadora. Mas em um projeto desses para produção, eu faço um pouco diferente:

<ul><li>
Crio imagens customizadas com docker instalado e já com EFS no fstab, montado. Tudo o que preciso já está naquela imagem.
Uso RDS ou um cluster master+slave ou Galera como db.
</li></ul>
Enfim, este é um projeto feito em pouco tempo (~12h). Não está perfeito, mas espero que sirva para avaliação.

<br/>
&nbsp;
<hr/>
<h2 id="licenÃ§a">Licença</h2>
<p>Copyright T. Fontoura 2022 - Todos os direitos reservados | 
Contato: <a href="https://www.linkedin.com/in/tom-fontoura/">T. Fontoura LinkedIn</a>
</p>
</div>
</body>
</html>
